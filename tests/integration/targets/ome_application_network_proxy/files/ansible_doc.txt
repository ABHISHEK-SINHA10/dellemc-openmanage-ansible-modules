- '        Update the Firmware by connecting to a network share (CIFS,'
- '        NFS, HTTP, HTTPS, FTP) that contains a catalog of available'
- '        updates. Network share should contain a valid repository of'
- '        Update Packages (DUPs) and a catalog file describing the DUPs.'
- '        All applicable updates contained in the repository are applied'
- '        to the system. This feature is available only with iDRAC'
- '        Enterprise License.'
- ''
- 'ADDED IN: version 2.1.0 of dellemc.openmanage'
- ''
- 'OPTIONS (= is mandatory):'
- ''
- '- apply_update'
- '        If `apply_update'' is set to `true'', then the packages are'
- '        applied.'
- '        If `apply_update'' is set to `false'', no updates are applied,'
- '        and a catalog report of packages is generated and returned.'
- '        default: true'
- '        type: bool'
- ''
- '- ca_path'
- '        The Privacy Enhanced Mail (PEM) file that contains a CA'
- '        certificate to be used for the validation.'
- '        default: null'
- '        type: path'
- '        added in: version 5.0.0 of dellemc.openmanage'
- ''
- ''
- '- catalog_file_name'
- '        Catalog file name relative to the `share_name''.'
- '        default: Catalog.xml'
- '        type: str'
- ''
- = idrac_ip
- '        iDRAC IP Address.'
- '        type: str'
- ''
- = idrac_password
- '        iDRAC user password.'
- '        If the password is not provided, then the environment variable'
- '        `IDRAC_PASSWORD'' is used.'
- '        Example: export IDRAC_PASSWORD=password'
- '        aliases: [idrac_pwd]'
- '        type: str'
- ''
- '- idrac_port'
- '        iDRAC port.'
- '        default: 443'
- '        type: int'
- ''
- = idrac_user
- '        iDRAC username.'
- '        If the username is not provided, then the environment variable'
- '        `IDRAC_USERNAME'' is used.'
- '        Example: export IDRAC_USERNAME=username'
- '        type: str'
- ''
- '- ignore_cert_warning'
- '        Specifies if certificate warnings are ignored when HTTPS share'
- '        is used. If `true'' option is set, then the certificate'
- '        warnings are ignored.'
- '        default: true'
- '        type: bool'
- ''
- '- job_wait'
- '        Whether to wait for job completion or not.'
- '        default: true'
- '        type: bool'
- ''
- '- proxy_passwd'
- '        The password for the proxy server.'
- '        default: null'
- '        type: str'
- ''
- '- proxy_port'
- '        The Port for the proxy server.'
- '        This is required when `proxy_support'' is `ParametersProxy''.'
- '        default: null'
- '        type: int'
- ''
- '- proxy_server'
- '        The IP address of the proxy server.'
- '        This IP will not be validated. The download job will be'
- '        created even for invalid `proxy_server''. Please check the'
- '        results of the job for error details.'
- '        This is required when `proxy_support'' is `ParametersProxy''.'
- '        default: null'
- '        type: str'
- ''
- '- proxy_support'
- '        Specifies if a proxy should be used.'
- '        Proxy parameters are applicable on `HTTP'', `HTTPS'', and `FTP'''
- '        share type of repositories.'
- '        `ParametersProxy'', sets the proxy parameters for the current'
- '        firmware operation.'
- '        `DefaultProxy'', iDRAC uses the proxy values set by default.'
- '        Default Proxy can be set in the Lifecycle Controller'
- '        attributes using [dellemc.openmanage.idrac_attributes].'
- '        `Off'', will not use the proxy.'
- '        For iDRAC8 based servers, use proxy server with basic'
- '        authentication.'
- '        For iDRAC9 based servers, ensure that you use digest'
- '        authentication for the proxy server, basic authentication is'
- '        not supported.'
- '        choices: [ParametersProxy, DefaultProxy, ''Off'']'
- '        default: ''Off'''
- '        type: str'
- ''
- '- proxy_type'
- '        The proxy type of the proxy server.'
- '        This is required when `proxy_support'' is `ParametersProxy''.'
- '        Note: SOCKS4 proxy does not support IPv6 address.'
- '        choices: [HTTP, SOCKS]'
- '        default: null'
- '        type: str'
- ''
- '- proxy_uname'
- '        The user name for the proxy server.'
- '        default: null'
- '        type: str'
- ''
- '- reboot'
- '        Provides the option to apply the update packages immediately'
- '        or in the next reboot.'
- '        If `reboot'' is set to `true'',  then the packages  are applied'
- '        immediately.'
- '        If `reboot'' is set to `false'', then the packages are staged'
- '        and applied in the next reboot.'
- '        Packages that do not require a reboot are applied immediately'
- '        irrespective of I (reboot).'
- '        default: false'
- '        type: bool'
- ''
- '- share_mnt'
- '        Local mount path of the network share with read-write'
- '        permission for ansible user.'
- '        This option is not applicable for HTTP, HTTPS, and FTP shares.'
- '        default: null'
- '        type: str'
- ''
- = share_name
- '        Network share path of update repository. CIFS, NFS, HTTP,'
- '        HTTPS and FTP share types are supported.'
- '        type: str'
- ''
- '- share_password'
- '        Network share user password. This option is mandatory for CIFS'
- '        Network Share.'
- '        aliases: [share_pwd]'
- '        default: null'
- '        type: str'
- ''
- '- share_user'
- '        Network share user in the format ''user@domain'' or'
- '        ''domain\\user'' if user is part of a domain else ''user''. This'
- '        option is mandatory for CIFS Network Share.'
- '        default: null'
- '        type: str'
- ''
- '- timeout'
- '        The socket level timeout in seconds.'
- '        default: 30'
- '        type: int'
- '        added in: version 5.0.0 of dellemc.openmanage'
- ''
- ''
- '- validate_certs'
- '        If `false'', the SSL certificates will not be validated.'
- '        Configure `false'' only on personally controlled sites where'
- '        self-signed certificates are used.'
- '        Prior to collection version `5.0.0'', the `validate_certs'' is'
- '        `false'' by default.'
- '        default: true'
- '        type: bool'
- '        added in: version 5.0.0 of dellemc.openmanage'
- ''
- ''
- ''
- 'NOTES:'
- '      * Run this module from a system that has direct access to'
- '        Dell iDRAC.'
- '      * Module will report success based on the iDRAC firmware'
- '        update parent job status if there are no individual'
- '        component jobs present.'
- '      * For server with iDRAC firmware 5.00.00.00 and later, if'
- '        the repository contains unsupported packages, then the'
- '        module will return success with a proper message.'
- '      * This module supports both IPv4 and IPv6 address for'
- '        `idrac_ip'' and `share_name''.'
- '      * This module supports `check_mode''.'
- ''
- ''
- 'REQUIREMENTS:  omsdk >= 1.2.503, python >= 3.9.6'
- ''
- 'AUTHOR: Rajeev Arakkal (@rajeevarakkal), Felix Stephen (@felixs88), Jagadeesh N
    V (@jagadeeshnv)'
- ''
- 'EXAMPLES:'
- ''
- '---'
- '- name: Update firmware from repository on a NFS Share'
- '  dellemc.openmanage.idrac_firmware:'
- '       idrac_ip: "192.168.0.1"'
- '       idrac_user: "user_name"'
- '       idrac_password: "user_password"'
- '       ca_path: "/path/to/ca_cert.pem"'
- '       share_name: "192.168.0.0:/share"'
- '       reboot: true'
- '       job_wait: true'
- '       apply_update: true'
- '       catalog_file_name: "Catalog.xml"'
- ''
- '- name: Update firmware from repository on a CIFS Share'
- '  dellemc.openmanage.idrac_firmware:'
- '       idrac_ip: "192.168.0.1"'
- '       idrac_user: "user_name"'
- '       idrac_password: "user_password"'
- '       ca_path: "/path/to/ca_cert.pem"'
- '       share_name: "full_cifs_path"'
- '       share_user: "share_user"'
- '       share_password: "share_password"'
- '       reboot: true'
- '       job_wait: true'
- '       apply_update: true'
- '       catalog_file_name: "Catalog.xml"'
- ''
- '- name: Update firmware from repository on a HTTP'
- '  dellemc.openmanage.idrac_firmware:'
- '       idrac_ip: "192.168.0.1"'
- '       idrac_user: "user_name"'
- '       idrac_password: "user_password"'
- '       ca_path: "/path/to/ca_cert.pem"'
- '       share_name: "http://downloads.dell.com"'
- '       reboot: true'
- '       job_wait: true'
- '       apply_update: true'
- ''
- '- name: Update firmware from repository on a HTTPS'
- '  dellemc.openmanage.idrac_firmware:'
- '       idrac_ip: "192.168.0.1"'
- '       idrac_user: "user_name"'
- '       idrac_password: "user_password"'
- '       ca_path: "/path/to/ca_cert.pem"'
- '       share_name: "https://downloads.dell.com"'
- '       reboot: true'
- '       job_wait: true'
- '       apply_update: true'
- ''
- '- name: Update firmware from repository on a HTTPS via proxy'
- '  dellemc.openmanage.idrac_firmware:'
- '       idrac_ip: "192.168.0.1"'
- '       idrac_user: "user_name"'
- '       idrac_password: "user_password"'
- '       ca_path: "/path/to/ca_cert.pem"'
- '       share_name: "https://downloads.dell.com"'
- '       reboot: true'
- '       job_wait: true'
- '       apply_update: true'
- '       proxy_support: ParametersProxy'
- '       proxy_server: 192.168.1.10'
- '       proxy_type: HTTP'
- '       proxy_port: 80'
- '       proxy_uname: "proxy_user"'
- '       proxy_passwd: "proxy_pwd"'
- ''
- '- name: Update firmware from repository on a FTP'
- '  dellemc.openmanage.idrac_firmware:'
- '       idrac_ip: "192.168.0.1"'
- '       idrac_user: "user_name"'
- '       idrac_password: "user_password"'
- '       ca_path: "/path/to/ca_cert.pem"'
- '       share_name: "ftp://ftp.mydomain.com"'
- '       reboot: true'
- '       job_wait: true'
- '       apply_update: true'
- ''
- ''
- 'RETURN VALUES:'
- '- msg'
- '        Overall firmware update status.'
- '        returned: always'
- '        sample: Successfully updated the firmware.'
- '        type: str'
- ''
- '- update_status'
- '        Firmware Update job and progress details from the iDRAC.'
- '        returned: success'
- '        sample:'
- '          InstanceID: JID_XXXXXXXXXXXX'
- '          JobStartTime: NA'
- '          JobState: Completed'
- '          Message: Job completed successfully.'
- '          MessageId: REDXXX'
- '          Name: Repository Update'
- '          Status: Success'
- '        type: dict'
